<div class="container-fluid mt-3" ng-controller="userController">
	<div class="row">
		<div class="col-lg-8">
			<div class="card">
				<div class="card-header bg-primary">
					<h5 class="card-title text-white">User Management</h5>
				</div>
				<div class="card-body">
					<div class="row mb-3">
						<div class="col-lg-6">
							<input
								type="text"
								ng-model="searchName"
								class="w-50 form-control"
								placeholder="Type search name..."
							/>
						</div>

						<div class="col-lg-3 offset-lg-3">
							<select class="form-select" ng-model="sortBy" ng-change="handleChangeSort()">
								<option value="name-asc">Name ASC</option>
								<option value="name-desc">Name DESC</option>
								<option value="age-asc">Age ASC</option>
								<option value="age-desc">Age DESC</option>
							</select>
						</div>
					</div>
					<div class="table-responsive">
						<table class="table table-hover table-striped">
							<thead>
								<tr>
									<th>ID</th>
									<th>Name</th>
									<th>Gender</th>
									<th>Age</th>
									<th>Phone</th>
									<th>Email</th>
									<th>Action</th>
								</tr>
							</thead>
							<tbody>
								<tr
									class=""
									ng-repeat="user in users | filterSortBy:sortBy | searchNameFilter:searchName"
								>
									<td class="">{{user.id}}</td>
									<td class="">{{user.firstName}}</td>
									<td class="">{{user.gender}}</td>
									<td class="">{{user.age}}</td>
									<td class="">{{user.phone}}</td>
									<td class="">{{user.email}}</td>
									<td>
										<button type="button" class="btn btn-primary" ng-click="handleEditUser(user)">
											Edit
										</button>
										<button type="button" class="btn btn-danger" ng-click="deleteUser(user.id)">
											Delete
										</button>
									</td>
								</tr>
							</tbody>
						</table>
					</div>
				</div>
				<div class="d-flex justify-content-end" style="margin-right: 20px">
					<nav aria-label="Page navigation example">
						<ul class="pagination">
							<li class="page-item">
								<a class="page-link" ng-click="handlePageChange(curPage - 1)">Previous</a>
							</li>
							<li class="page-item" ng-class="{active: isActivePage(1)}">
								<a class="page-link" ng-click="handlePageChange(1)">1</a>
							</li>
							<li class="page-item">
								<a class="page-link">...</a>
							</li>
							<li
								class="page-item"
								ng-class="{active: isActivePage(curPage)}"
								ng-show="curPage != 1 && curPage != totalPages"
							>
								<a class="page-link">{{curPage}}</a>
							</li>
							<li class="page-item">
								<a class="page-link">...</a>
							</li>
							<li class="page-item" ng-class="{active: isActivePage(totalPages)}">
								<a class="page-link" ng-click="handlePageChange(totalPages)">{{totalPages}}</a>
							</li>
							<li class="page-item">
								<a class="page-link" ng-click="handlePageChange(curPage + 1)">Next</a>
							</li>
						</ul>
					</nav>
				</div>
			</div>
		</div>
		<div class="col-lg-4">
			<div class="card">
				<div class="card-header bg-primary">
					<h5 class="card-title text-white" ng-show="isAdd">Add User</h5>
					<h5 class="card-title text-white" ng-hide="isAdd">Edit User</h5>
				</div>
				<form name="userForm" ng-submit="handleSubmit(userForm)" novalidate>
					<div class="card-body">
						<div class="mb-3">
							<label for="firstName" class="form-label">First Name</label>
							<input
								type="text"
								ng-model="formData.firstName"
								class="form-control"
								id="firstName"
								ng-model-options="{ debounce: 250 }"
								required=""
							/>
							<div ng-show="!userForm.firstName.$error.required" class="valid-feedback">Looks good!</div>
							<div ng-hide="userForm.firstName.$error.required" class="invalid-feedback">
								First name is required!
							</div>
						</div>
						<div class="mb-3">
							<label for="lastName" class="form-label">Last Name</label>
							<input
								type="text"
								ng-model="formData.lastName"
								class="form-control"
								id="lastName"
								ng-model-options="{ debounce: 250 }"
							/>
						</div>
						<div class="mb-3">
							<label for="male" class="form-check-label">Male</label>
							<input
								type="radio"
								name="gender"
								ng-model="formData.gender"
								class="form-check-input me-4"
								id="male"
								value="male"
							/>
							<label for="female" class="form-check-label">Female</label>
							<input
								type="radio"
								name="gender"
								ng-model="formData.gender"
								class="form-check-input"
								id="female"
								value="female"
							/>
						</div>
						<div class="mb-3">
							<label for="email" class="form-label">Email</label>
							<input
								type="email"
								ng-model="formData.email"
								class="form-control"
								id="email"
								ng-model-options="{ debounce: 250 }"
							/>
						</div>
						<div class="mb-3">
							<label for="phone" class="form-label">Phone</label>
							<input
								type="text"
								ng-model="formData.phone"
								class="form-control"
								id="phone"
								ng-model-options="{ debounce: 250 }"
							/>
						</div>
						<div class="mb-3">
							<label for="age" class="form-label">Age</label>
							<input
								type="number"
								ng-model="formData.age"
								class="form-control"
								id="age"
								ng-model-options="{ debounce: 250 }"
							/>
						</div>
					</div>

					<div class="card-footer">
						<button type="submit" ng-show="isAdd" class="btn btn-primary" ng-disabled="!userForm.$dirty">
							Add
						</button>
						<button type="submit" ng-hide="isAdd" class="btn btn-primary" ng-disabled="!userForm.$dirty">
							Save
						</button>
						<button type="button" class="btn btn-primary" ng-click="resetForm()">Reset</button>
					</div>
				</form>
			</div>
		</div>
	</div>
</div>
